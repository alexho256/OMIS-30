import datetime


def cagr_formula(bb, eb, year):
    cagr = ((eb / bb) ** (1 / year)) - 1
    cagr = cagr * 100
    return cagr


f = open('cagr_results.txt', 'w+')
CAGR_list = []
while True:
    while True:
        bb = input("Please enter beginning balance")
        bb = float(bb)
        try:
            1 / float(bb)
            break
        except ZeroDivisionError:
            print("non-zero number")
        except ValueError:
            print("enter numeric values")

    while True:
        eb = input("Enter ending balance")
        eb = float(eb)
        try:
            float(eb)
            break
        except ValueError:
            print("Enter numeric values")

    while True:
        year = input("Enter number of years")
        year = int(year)
        try:
            int(year)
            break
        except ValueError:
            print("Enter numeric values")

    CAGR = cagr_formula(bb, eb, year)
    print("Compound Annual Growth Rate={0:,.2f}%".format(CAGR))
    date = datetime.datetime.now().strftime("%m-%d-%Y %H:%M")
    CAGR_list.append([bb, eb, year, CAGR, date])

    while True:
        response = input("Do you want to calculate again? Continue or Stop").lower()
        if response == 'continue':
            break
        elif response == 'stop':
            print(CAGR_list, file=f)
            quit()
        else:
            print("Not an option. Please enter continue or stop only")
